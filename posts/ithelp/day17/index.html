<!doctype html><html lang=zh-tw dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Day 17：coc.nvim 設定下集 | Simba's Blog</title><meta name=keywords content="cli,terminal,software development,vim,tmux,zsh"><meta name=description content="今天的東西相當多，在 GitHub README Example 中除了昨天介紹過得今天都收錄了，直接進主題吧！
喔！另外有些東西我真的不知道是什麼我會用原文寫並用中文括號括起來，歡迎知道的朋友留言告訴我
&#34; 設定文字編碼（我想這個你的 init.vim/.vimrc 都應該有了） set encoding=utf-8 &#34; 如果 hidden 沒有設定，「TextEdit」可能會失敗 &#34; TextEdit 也許是彈出式輸入框吧？阿災 set hidden &#34; 有些伺服器對於備份檔會出錯，請看 issue #649 &#34; https://github.com/neoclide/coc.nvim/issues/649 set nobackup set nowritebackup &#34; 把下面的命令欄變高，多一點空間 set cmdheight=2 &#34; 不傳訊息給「|ins-completion-menu|」（這我看不太出來有什麼差 set shortmess+=c &#34; 使用 <c-space> 觸發自動完成 if has('nvim') inoremap <silent><expr> <c-space> coc#refresh() else inoremap <silent><expr> <c-@> coc#refresh endif &#34; 用 `[g` 和 `]g` 跳到診斷的位置（就是程式碼有問題地方 &#34; 用命令 `:CocDiagnostics` 在分割視窗列出目前檔案中所有有問題的點 nmap <silent> [g <Plug>(coc-diagnostic-prev) nmap <silent> ]g <Plug>(coc-diagnostic-next) &#34; 程式碼轉跳（這個我覺得有點難記，而且這四個實驗出來效果非常像，我的建議是試過後選你覺得順眼的，不要全上 nmap <silent> gd <Plug>(coc-definition) nmap <silent> gy <Plug>(coc-type-definition) nmap <silent> gi <Plug>(coc-implementation) nmap <silent> gr <Plug>(coc-references) &#34; 用 K（注意大寫）顯示文件在分割視窗 nnoremap <silent> K :call <SID>show_documentation()<CR> function!"><meta name=author content="simba-fs"><link rel=canonical href=https://blog.simbafs.cc/posts/ithelp/day17/><link crossorigin=anonymous href=/assets/css/stylesheet.min.48a18943c2fc15c38a372b8dde1f5e5dc0bc64fa6cb90f5a817d2f8c76b7f3ae.css integrity="sha256-SKGJQ8L8FcOKNyuN3h9eXcC8ZPpsuQ9agX0vjHa3864=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.e85ad0406048e8176e1c7661b25d5c69297ddfe41dc4124cf75ecb99a4f7b3d1.js integrity="sha256-6FrQQGBI6BduHHZhsl1caSl93+QdxBJM917LmaT3s9E=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.simbafs.cc/images/icon/icon.png><link rel=icon type=image/png sizes=16x16 href=https://blog.simbafs.cc/images/icon/icon-16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.simbafs.cc/images/icon/icon-32.png><link rel=apple-touch-icon href=https://blog.simbafs.cc/images/icon/icon.png><link rel=mask-icon href=https://blog.simbafs.cc/images/icon/icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css integrity=sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js integrity=sha384-X/XCfMm41VSsqRNQgDerQczD69XqmjOOOwYQvr/uuC+j4OPoNhVgjdGFwhvN02Ja crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous onload=renderMathInElement(document.body)></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-175823992-1","auto"),ga("send","pageview"))</script><meta property="og:title" content="Day 17：coc.nvim 設定下集"><meta property="og:description" content="今天的東西相當多，在 GitHub README Example 中除了昨天介紹過得今天都收錄了，直接進主題吧！
喔！另外有些東西我真的不知道是什麼我會用原文寫並用中文括號括起來，歡迎知道的朋友留言告訴我
&#34; 設定文字編碼（我想這個你的 init.vim/.vimrc 都應該有了） set encoding=utf-8 &#34; 如果 hidden 沒有設定，「TextEdit」可能會失敗 &#34; TextEdit 也許是彈出式輸入框吧？阿災 set hidden &#34; 有些伺服器對於備份檔會出錯，請看 issue #649 &#34; https://github.com/neoclide/coc.nvim/issues/649 set nobackup set nowritebackup &#34; 把下面的命令欄變高，多一點空間 set cmdheight=2 &#34; 不傳訊息給「|ins-completion-menu|」（這我看不太出來有什麼差 set shortmess+=c &#34; 使用 <c-space> 觸發自動完成 if has('nvim') inoremap <silent><expr> <c-space> coc#refresh() else inoremap <silent><expr> <c-@> coc#refresh endif &#34; 用 `[g` 和 `]g` 跳到診斷的位置（就是程式碼有問題地方 &#34; 用命令 `:CocDiagnostics` 在分割視窗列出目前檔案中所有有問題的點 nmap <silent> [g <Plug>(coc-diagnostic-prev) nmap <silent> ]g <Plug>(coc-diagnostic-next) &#34; 程式碼轉跳（這個我覺得有點難記，而且這四個實驗出來效果非常像，我的建議是試過後選你覺得順眼的，不要全上 nmap <silent> gd <Plug>(coc-definition) nmap <silent> gy <Plug>(coc-type-definition) nmap <silent> gi <Plug>(coc-implementation) nmap <silent> gr <Plug>(coc-references) &#34; 用 K（注意大寫）顯示文件在分割視窗 nnoremap <silent> K :call <SID>show_documentation()<CR> function!"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.simbafs.cc/posts/ithelp/day17/"><meta property="og:image" content="https://blog.simbafs.cc/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-09-17T00:00:00+00:00"><meta property="article:modified_time" content="2021-09-17T00:00:00+00:00"><meta property="og:site_name" content="Simba 的喵窩"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.simbafs.cc/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Day 17：coc.nvim 設定下集"><meta name=twitter:description content="今天的東西相當多，在 GitHub README Example 中除了昨天介紹過得今天都收錄了，直接進主題吧！
喔！另外有些東西我真的不知道是什麼我會用原文寫並用中文括號括起來，歡迎知道的朋友留言告訴我
&#34; 設定文字編碼（我想這個你的 init.vim/.vimrc 都應該有了） set encoding=utf-8 &#34; 如果 hidden 沒有設定，「TextEdit」可能會失敗 &#34; TextEdit 也許是彈出式輸入框吧？阿災 set hidden &#34; 有些伺服器對於備份檔會出錯，請看 issue #649 &#34; https://github.com/neoclide/coc.nvim/issues/649 set nobackup set nowritebackup &#34; 把下面的命令欄變高，多一點空間 set cmdheight=2 &#34; 不傳訊息給「|ins-completion-menu|」（這我看不太出來有什麼差 set shortmess+=c &#34; 使用 <c-space> 觸發自動完成 if has('nvim') inoremap <silent><expr> <c-space> coc#refresh() else inoremap <silent><expr> <c-@> coc#refresh endif &#34; 用 `[g` 和 `]g` 跳到診斷的位置（就是程式碼有問題地方 &#34; 用命令 `:CocDiagnostics` 在分割視窗列出目前檔案中所有有問題的點 nmap <silent> [g <Plug>(coc-diagnostic-prev) nmap <silent> ]g <Plug>(coc-diagnostic-next) &#34; 程式碼轉跳（這個我覺得有點難記，而且這四個實驗出來效果非常像，我的建議是試過後選你覺得順眼的，不要全上 nmap <silent> gd <Plug>(coc-definition) nmap <silent> gy <Plug>(coc-type-definition) nmap <silent> gi <Plug>(coc-implementation) nmap <silent> gr <Plug>(coc-references) &#34; 用 K（注意大寫）顯示文件在分割視窗 nnoremap <silent> K :call <SID>show_documentation()<CR> function!"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"posts","item":"https://blog.simbafs.cc/posts/"},{"@type":"ListItem","position":2,"name":"ithelp","item":"https://blog.simbafs.cc/posts/ithelp/"},{"@type":"ListItem","position":3,"name":"Day 17：coc.nvim 設定下集","item":"https://blog.simbafs.cc/posts/ithelp/day17/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Day 17：coc.nvim 設定下集","name":"Day 17：coc.nvim 設定下集","description":"今天的東西相當多，在 GitHub README Example 中除了昨天介紹過得今天都收錄了，直接進主題吧！\n喔！另外有些東西我真的不知道是什麼我會用原文寫並用中文括號括起來，歡迎知道的朋友留言告訴我\n\u0026#34; 設定文字編碼（我想這個你的 init.vim/.vimrc 都應該有了） set encoding=utf-8 \u0026#34; 如果 hidden 沒有設定，「TextEdit」可能會失敗 \u0026#34; TextEdit 也許是彈出式輸入框吧？阿災 set hidden \u0026#34; 有些伺服器對於備份檔會出錯，請看 issue #649 \u0026#34; https://github.com/neoclide/coc.nvim/issues/649 set nobackup set nowritebackup \u0026#34; 把下面的命令欄變高，多一點空間 set cmdheight=2 \u0026#34; 不傳訊息給「|ins-completion-menu|」（這我看不太出來有什麼差 set shortmess+=c \u0026#34; 使用 \u0026lt;c-space\u0026gt; 觸發自動完成 if has(\u0026#39;nvim\u0026#39;) inoremap \u0026lt;silent\u0026gt;\u0026lt;expr\u0026gt; \u0026lt;c-space\u0026gt; coc#refresh() else inoremap \u0026lt;silent\u0026gt;\u0026lt;expr\u0026gt; \u0026lt;c-@\u0026gt; coc#refresh endif \u0026#34; 用 `[g` 和 `]g` 跳到診斷的位置（就是程式碼有問題地方 \u0026#34; 用命令 `:CocDiagnostics` 在分割視窗列出目前檔案中所有有問題的點 nmap \u0026lt;silent\u0026gt; [g \u0026lt;Plug\u0026gt;(coc-diagnostic-prev) nmap \u0026lt;silent\u0026gt; ]g \u0026lt;Plug\u0026gt;(coc-diagnostic-next) \u0026#34; 程式碼轉跳（這個我覺得有點難記，而且這四個實驗出來效果非常像，我的建議是試過後選你覺得順眼的，不要全上 nmap \u0026lt;silent\u0026gt; gd \u0026lt;Plug\u0026gt;(coc-definition) nmap \u0026lt;silent\u0026gt; gy \u0026lt;Plug\u0026gt;(coc-type-definition) nmap \u0026lt;silent\u0026gt; gi \u0026lt;Plug\u0026gt;(coc-implementation) nmap \u0026lt;silent\u0026gt; gr \u0026lt;Plug\u0026gt;(coc-references) \u0026#34; 用 K（注意大寫）顯示文件在分割視窗 nnoremap \u0026lt;silent\u0026gt; K :call \u0026lt;SID\u0026gt;show_documentation()\u0026lt;CR\u0026gt; function!","keywords":["cli","terminal","software development","vim","tmux","zsh"],"articleBody":"今天的東西相當多，在 GitHub README Example 中除了昨天介紹過得今天都收錄了，直接進主題吧！\n喔！另外有些東西我真的不知道是什麼我會用原文寫並用中文括號括起來，歡迎知道的朋友留言告訴我\n\" 設定文字編碼（我想這個你的 init.vim/.vimrc 都應該有了） set encoding=utf-8 \" 如果 hidden 沒有設定，「TextEdit」可能會失敗 \" TextEdit 也許是彈出式輸入框吧？阿災 set hidden \" 有些伺服器對於備份檔會出錯，請看 issue #649 \" https://github.com/neoclide/coc.nvim/issues/649 set nobackup set nowritebackup \" 把下面的命令欄變高，多一點空間 set cmdheight=2 \" 不傳訊息給「|ins-completion-menu|」（這我看不太出來有什麼差 set shortmess+=c \" 使用 觸發自動完成 if has('nvim') inoremap \u003csilent\u003e\u003cexpr\u003e \u003cc-space\u003e coc#refresh() else inoremap \u003csilent\u003e\u003cexpr\u003e \u003cc-@\u003e coc#refresh endif \" 用 `[g` 和 `]g` 跳到診斷的位置（就是程式碼有問題地方 \" 用命令 `:CocDiagnostics` 在分割視窗列出目前檔案中所有有問題的點 nmap \u003csilent\u003e [g \u003cPlug\u003e(coc-diagnostic-prev) nmap \u003csilent\u003e ]g \u003cPlug\u003e(coc-diagnostic-next) \" 程式碼轉跳（這個我覺得有點難記，而且這四個實驗出來效果非常像，我的建議是試過後選你覺得順眼的，不要全上 nmap \u003csilent\u003e gd \u003cPlug\u003e(coc-definition) nmap \u003csilent\u003e gy \u003cPlug\u003e(coc-type-definition) nmap \u003csilent\u003e gi \u003cPlug\u003e(coc-implementation) nmap \u003csilent\u003e gr \u003cPlug\u003e(coc-references) \" 用 K（注意大寫）顯示文件在分割視窗 nnoremap \u003csilent\u003e K :call \u003cSID\u003eshow_documentation()\u003cCR\u003e function! s:show_documentation() if (index(['vim','help'], \u0026filetype) \u003e= 0) execute 'h '.expand('') elseif (coc#rpc#ready()) call CocActionAsync('doHover') else execute '!' . \u0026keywordprg . \" \" . expand('') endif endfunction \" 突顯游標下的符號（這是淡淡的灰色 autocmd CursorHold * silent call CocActionAsync('highlight') \" 整理程式碼，但是我們在 Day 15 裝過 Chiel92/vim-autoformat 了，coc 的 autoformat 在遇到不會的情況會直白的噴錯比較醜， \" 相較之下 vim-autoformat 比較好看，所以我建議兩個選一個，不要都裝 xmap \u003cleader\u003ef \u003cPlug\u003e(coc-format-selected) nmap \u003cleader\u003ef \u003cPlug\u003e(coc-format-selected) augroup mygroup autocmd! \" 設定指定檔案的 formatter autocmd FileType typescript,json setl formatexpr=CocAction('formatSelected') \" Update signature help on jump placeholder.（這個真的不會翻譯 autocmd User CocJumpPlaceholder call CocActionAsync('showSignatureHelp') augroup end \" 將 codeAction 應用到選取的區域 \" 範例：`aap` 對應一個段落 (ap = a paragraph，同理 aw = a word) xmap \u003cleader\u003ea \u003cPlug\u003e(coc-codeaction-selected) nmap \u003cleader\u003ea \u003cPlug\u003e(coc-codeaction-selected) \" 將 codeaction 應用到這個檔案 nmap \u003cleader\u003eac \u003cPlug\u003e(coc-codeaction) \" 自動修補目前這行（這要 language server 有提供 nmap \u003cleader\u003eqf \u003cPlug\u003e(coc-fix-current) \" 映射函數和類別（嗎？測試起來怪怪的 \" 注意：需要 language server 支援 'textDocument.documentSymbol' xmap if \u003cPlug\u003e(coc-funcobj-i) omap if \u003cPlug\u003e(coc-funcobj-i) xmap af \u003cPlug\u003e(coc-funcobj-a) omap af \u003cPlug\u003e(coc-funcobj-a) xmap ic \u003cPlug\u003e(coc-classobj-i) omap ic \u003cPlug\u003e(coc-classobj-i) xmap ac \u003cPlug\u003e(coc-classobj-a) omap ac \u003cPlug\u003e(coc-classobj-a) \" 用 CTRL-S 選取整個函數或是類別 \" 需要 language server 支援 'textDocument/selectionRange' nmap \u003csilent\u003e \u003cC-s\u003e \u003cPlug\u003e(coc-range-select) xmap \u003csilent\u003e \u003cC-s\u003e \u003cPlug\u003e(coc-range-select) \" 新增 `:Format` 命令，和 Chiel92/vim-autoformat 選一個就行了 command! -nargs=0 Format :call CocAction('format') \" 新增 `:Fold` 命令，可以折疊目前的檔案（我怎麼測試就是折不起來，不確定到底在幹麻，vim 內建也有折疊阿？ command! -nargs=? Fold :call CocAction('fold', \u003cf-args\u003e) \" 新增 `:OR` 命令，可以整理目前檔案引入的函式庫（測試 Golang 會刪掉沒用到的但是 nodejs 要用 'import' 才會理人，用 'require' 他會當作沒看到什麼都不做 command! -nargs=0 OR :call CocAction('runCommand', 'editor.action.organizeImport') \" 添加 (neo)vim 原生的狀態列支援（他會在最下面提供一些訊息 \" 注意：用 `:h coc-status` 指令看如何和其他狀態列外掛結合 \" 提供範例：lightline.vim, vim-airline.（如果你要用這個的話請務必看範例，不然你的外掛等於白裝 set statusline^=%{coc#status()}%{get(b:,'coc_current_function','')} \" CocList 的鍵盤映射（CocList 的功能是顯示所有 XXX，我等等就只寫 XXX 的部份 \" 診斷 nnoremap \u003csilent\u003e\u003cnowait\u003e \u003cspace\u003ea :\u003cC-u\u003eCocList diagnostics\u003ccr\u003e \" 擴充 nnoremap \u003csilent\u003e\u003cnowait\u003e \u003cspace\u003ee :\u003cC-u\u003eCocList extensions\u003ccr\u003e \" 命令 nnoremap \u003csilent\u003e\u003cnowait\u003e \u003cspace\u003ec :\u003cC-u\u003eCocList commands\u003ccr\u003e \" 大綱（和 tag bar 的功能差不多，就是你定義的變數物件函數等等 nnoremap \u003csilent\u003e\u003cnowait\u003e \u003cspace\u003eo :\u003cC-u\u003eCocList outline\u003ccr\u003e \" 在 workspace 中找某個變數、函數、物件（「符號」） nnoremap \u003csilent\u003e\u003cnowait\u003e \u003cspace\u003es :\u003cC-u\u003eCocList -I symbols\u003ccr\u003e \" 執行預設的 `:CocNext` nnoremap \u003csilent\u003e\u003cnowait\u003e \u003cspace\u003ej :\u003cC-u\u003eCocNext\u003cCR\u003e \" 執行預設的 `:CocPrev nnoremap \u003csilent\u003e\u003cnowait\u003e \u003cspace\u003ek :\u003cC-u\u003eCocPrev\u003cCR\u003e \" 打開上一次的 `:CocList`（這個指令可以列出很多東西 nnoremap \u003csilent\u003e\u003cnowait\u003e \u003cspace\u003ep :\u003cC-u\u003eCocListResume\u003cCR\u003e 結尾 呼～！總算翻譯完了，有幾個我真的看不出來在幹嘛的設定翻譯不太好請各位見諒。\n","wordCount":"389","inLanguage":"zh-tw","datePublished":"2021-09-17T00:00:00Z","dateModified":"2021-09-17T00:00:00Z","author":{"@type":"Person","name":"simba-fs"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.simbafs.cc/posts/ithelp/day17/"},"publisher":{"@type":"Organization","name":"Simba's Blog","logo":{"@type":"ImageObject","url":"https://blog.simbafs.cc/images/icon/icon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.simbafs.cc/ accesskey=h title="Home (Alt + H)"><img src=https://blog.simbafs.cc/images/icon/icon.png alt=logo aria-label=logo height=35>Home</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://blog.simbafs.cc/posts/ title=Categories><span>Categories</span></a></li><li><a href=https://blog.simbafs.cc/archive/ title=Archives><span>Archives</span></a></li><li><a href=https://blog.simbafs.cc/resource/ title=Resource><span>Resource</span></a></li><li><a href=https://blog.simbafs.cc/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.simbafs.cc/>首頁</a>&nbsp;»&nbsp;<a href=https://blog.simbafs.cc/posts/>posts</a>&nbsp;»&nbsp;<a href=https://blog.simbafs.cc/posts/ithelp/>ithelp</a></div><h1 class=post-title>Day 17：coc.nvim 設定下集</h1><div class=post-meta><span title='2021-09-17 00:00:00 +0000 UTC'>2021-September-17</span>&nbsp;·&nbsp;2 分鐘&nbsp;·&nbsp;simba-fs</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目錄</span></summary><div class=inner><ul><li><a href=#%e7%b5%90%e5%b0%be aria-label=結尾>結尾</a></li></ul></div></details></div><div class=post-content><p>今天的東西相當多，在 <a href=https://github.com/neoclide/coc.nvim#example-vim-configuration>GitHub README Example</a> 中除了昨天介紹過得今天都收錄了，直接進主題吧！<br>喔！另外有些東西我真的不知道是什麼我會用原文寫並用中文括號括起來，歡迎知道的朋友留言告訴我</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=display:flex><span><span style=color:#75715e>&#34; 設定文字編碼（我想這個你的 init.vim/.vimrc 都應該有了）</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>set</span> <span style=color:#a6e22e>encoding</span>=<span style=color:#a6e22e>utf</span><span style=color:#ae81ff>-8</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34; 如果 hidden 沒有設定，「TextEdit」可能會失敗</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; TextEdit 也許是彈出式輸入框吧？阿災</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>set</span> <span style=color:#a6e22e>hidden</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34; 有些伺服器對於備份檔會出錯，請看 issue #649</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; https://github.com/neoclide/coc.nvim/issues/649</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>set</span> <span style=color:#a6e22e>nobackup</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>set</span> <span style=color:#a6e22e>nowritebackup</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34; 把下面的命令欄變高，多一點空間</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>set</span> <span style=color:#a6e22e>cmdheight</span>=<span style=color:#ae81ff>2</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34; 不傳訊息給「|ins-completion-menu|」（這我看不太出來有什麼差</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>set</span> <span style=color:#a6e22e>shortmess</span>+=<span style=color:#a6e22e>c</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34; 使用 &lt;c-space&gt; 觸發自動完成</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>has</span>(<span style=color:#e6db74>&#39;nvim&#39;</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#a6e22e>inoremap</span> &lt;<span style=color:#a6e22e>silent</span>&gt;&lt;<span style=color:#a6e22e>expr</span>&gt; &lt;<span style=color:#a6e22e>c</span>-<span style=color:#a6e22e>space</span>&gt; <span style=color:#a6e22e>coc</span>#<span style=color:#a6e22e>refresh</span>()<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>else</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#a6e22e>inoremap</span> &lt;<span style=color:#a6e22e>silent</span>&gt;&lt;<span style=color:#a6e22e>expr</span>&gt; &lt;<span style=color:#a6e22e>c</span>-@&gt; <span style=color:#a6e22e>coc</span>#<span style=color:#a6e22e>refresh</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>endif</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34; 用 `[g` 和 `]g` 跳到診斷的位置（就是程式碼有問題地方</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; 用命令 `:CocDiagnostics` 在分割視窗列出目前檔案中所有有問題的點</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>nmap</span> &lt;<span style=color:#a6e22e>silent</span>&gt; [<span style=color:#a6e22e>g</span> &lt;<span style=color:#a6e22e>Plug</span>&gt;(<span style=color:#a6e22e>coc</span>-<span style=color:#a6e22e>diagnostic</span>-<span style=color:#a6e22e>prev</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>nmap</span> &lt;<span style=color:#a6e22e>silent</span>&gt; ]<span style=color:#a6e22e>g</span> &lt;<span style=color:#a6e22e>Plug</span>&gt;(<span style=color:#a6e22e>coc</span>-<span style=color:#a6e22e>diagnostic</span>-<span style=color:#a6e22e>next</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34; 程式碼轉跳（這個我覺得有點難記，而且這四個實驗出來效果非常像，我的建議是試過後選你覺得順眼的，不要全上</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>nmap</span> &lt;<span style=color:#a6e22e>silent</span>&gt; <span style=color:#a6e22e>gd</span> &lt;<span style=color:#a6e22e>Plug</span>&gt;(<span style=color:#a6e22e>coc</span>-<span style=color:#a6e22e>definition</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>nmap</span> &lt;<span style=color:#a6e22e>silent</span>&gt; <span style=color:#a6e22e>gy</span> &lt;<span style=color:#a6e22e>Plug</span>&gt;(<span style=color:#a6e22e>coc</span>-<span style=color:#a6e22e>type</span>-<span style=color:#a6e22e>definition</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>nmap</span> &lt;<span style=color:#a6e22e>silent</span>&gt; <span style=color:#a6e22e>gi</span> &lt;<span style=color:#a6e22e>Plug</span>&gt;(<span style=color:#a6e22e>coc</span>-<span style=color:#a6e22e>implementation</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>nmap</span> &lt;<span style=color:#a6e22e>silent</span>&gt; <span style=color:#a6e22e>gr</span> &lt;<span style=color:#a6e22e>Plug</span>&gt;(<span style=color:#a6e22e>coc</span>-<span style=color:#a6e22e>references</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34; 用 K（注意大寫）顯示文件在分割視窗</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>nnoremap</span> &lt;<span style=color:#a6e22e>silent</span>&gt; <span style=color:#a6e22e>K</span> :<span style=color:#a6e22e>call</span> &lt;<span style=color:#a6e22e>SID</span>&gt;<span style=color:#a6e22e>show_documentation</span>()&lt;<span style=color:#a6e22e>CR</span>&gt;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>function</span>! <span style=color:#a6e22e>s</span>:<span style=color:#a6e22e>show_documentation</span>()<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>index</span>([<span style=color:#e6db74>&#39;vim&#39;</span>,<span style=color:#e6db74>&#39;help&#39;</span>], &amp;<span style=color:#a6e22e>filetype</span>) &gt;= <span style=color:#ae81ff>0</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>    <span style=color:#a6e22e>execute</span> <span style=color:#e6db74>&#39;h &#39;</span>.<span style=color:#a6e22e>expand</span>(<span style=color:#e6db74>&#39;&lt;cword&gt;&#39;</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#66d9ef>elseif</span> (<span style=color:#a6e22e>coc</span>#<span style=color:#a6e22e>rpc</span>#<span style=color:#a6e22e>ready</span>())<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>    <span style=color:#a6e22e>call</span> <span style=color:#a6e22e>CocActionAsync</span>(<span style=color:#e6db74>&#39;doHover&#39;</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#66d9ef>else</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>    <span style=color:#a6e22e>execute</span> <span style=color:#e6db74>&#39;!&#39;</span> . &amp;<span style=color:#a6e22e>keywordprg</span> . <span style=color:#e6db74>&#34; &#34;</span> . <span style=color:#a6e22e>expand</span>(<span style=color:#e6db74>&#39;&lt;cword&gt;&#39;</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#66d9ef>endif</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>endfunction</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34; 突顯游標下的符號（這是淡淡的灰色</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>autocmd</span> <span style=color:#a6e22e>CursorHold</span> * <span style=color:#a6e22e>silent</span> <span style=color:#a6e22e>call</span> <span style=color:#a6e22e>CocActionAsync</span>(<span style=color:#e6db74>&#39;highlight&#39;</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34; 整理程式碼，但是我們在 Day 15 裝過 Chiel92/vim-autoformat 了，coc 的 autoformat 在遇到不會的情況會直白的噴錯比較醜，</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; 相較之下 vim-autoformat 比較好看，所以我建議兩個選一個，不要都裝</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>xmap</span> &lt;<span style=color:#a6e22e>leader</span>&gt;<span style=color:#a6e22e>f</span>  &lt;<span style=color:#a6e22e>Plug</span>&gt;(<span style=color:#a6e22e>coc</span>-<span style=color:#a6e22e>format</span>-<span style=color:#a6e22e>selected</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>nmap</span> &lt;<span style=color:#a6e22e>leader</span>&gt;<span style=color:#a6e22e>f</span>  &lt;<span style=color:#a6e22e>Plug</span>&gt;(<span style=color:#a6e22e>coc</span>-<span style=color:#a6e22e>format</span>-<span style=color:#a6e22e>selected</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>augroup</span> <span style=color:#a6e22e>mygroup</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#a6e22e>autocmd</span>!<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>  &#34; 設定指定檔案的 formatter</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#a6e22e>autocmd</span> <span style=color:#a6e22e>FileType</span> <span style=color:#a6e22e>typescript</span>,<span style=color:#a6e22e>json</span> <span style=color:#a6e22e>setl</span> <span style=color:#a6e22e>formatexpr</span>=<span style=color:#a6e22e>CocAction</span>(<span style=color:#e6db74>&#39;formatSelected&#39;</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>  &#34; Update signature help on jump placeholder.（這個真的不會翻譯</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#a6e22e>autocmd</span> <span style=color:#a6e22e>User</span> <span style=color:#a6e22e>CocJumpPlaceholder</span> <span style=color:#a6e22e>call</span> <span style=color:#a6e22e>CocActionAsync</span>(<span style=color:#e6db74>&#39;showSignatureHelp&#39;</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>augroup</span> <span style=color:#a6e22e>end</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34; 將 codeAction 應用到選取的區域</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; 範例：`&lt;leader&gt;aap` 對應一個段落 (ap = a paragraph，同理 aw = a word)</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>xmap</span> &lt;<span style=color:#a6e22e>leader</span>&gt;<span style=color:#a6e22e>a</span>  &lt;<span style=color:#a6e22e>Plug</span>&gt;(<span style=color:#a6e22e>coc</span>-<span style=color:#a6e22e>codeaction</span>-<span style=color:#a6e22e>selected</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>nmap</span> &lt;<span style=color:#a6e22e>leader</span>&gt;<span style=color:#a6e22e>a</span>  &lt;<span style=color:#a6e22e>Plug</span>&gt;(<span style=color:#a6e22e>coc</span>-<span style=color:#a6e22e>codeaction</span>-<span style=color:#a6e22e>selected</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34; 將 codeaction 應用到這個檔案</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>nmap</span> &lt;<span style=color:#a6e22e>leader</span>&gt;<span style=color:#a6e22e>ac</span>  &lt;<span style=color:#a6e22e>Plug</span>&gt;(<span style=color:#a6e22e>coc</span>-<span style=color:#a6e22e>codeaction</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; 自動修補目前這行（這要 language server 有提供</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>nmap</span> &lt;<span style=color:#a6e22e>leader</span>&gt;<span style=color:#a6e22e>qf</span>  &lt;<span style=color:#a6e22e>Plug</span>&gt;(<span style=color:#a6e22e>coc</span>-<span style=color:#a6e22e>fix</span>-<span style=color:#a6e22e>current</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34; 映射函數和類別（嗎？測試起來怪怪的</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; 注意：需要 language server 支援 &#39;textDocument.documentSymbol&#39;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>xmap</span> <span style=color:#66d9ef>if</span> &lt;<span style=color:#a6e22e>Plug</span>&gt;(<span style=color:#a6e22e>coc</span>-<span style=color:#a6e22e>funcobj</span>-<span style=color:#a6e22e>i</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>omap</span> <span style=color:#66d9ef>if</span> &lt;<span style=color:#a6e22e>Plug</span>&gt;(<span style=color:#a6e22e>coc</span>-<span style=color:#a6e22e>funcobj</span>-<span style=color:#a6e22e>i</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>xmap</span> <span style=color:#a6e22e>af</span> &lt;<span style=color:#a6e22e>Plug</span>&gt;(<span style=color:#a6e22e>coc</span>-<span style=color:#a6e22e>funcobj</span>-<span style=color:#a6e22e>a</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>omap</span> <span style=color:#a6e22e>af</span> &lt;<span style=color:#a6e22e>Plug</span>&gt;(<span style=color:#a6e22e>coc</span>-<span style=color:#a6e22e>funcobj</span>-<span style=color:#a6e22e>a</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>xmap</span> <span style=color:#a6e22e>ic</span> &lt;<span style=color:#a6e22e>Plug</span>&gt;(<span style=color:#a6e22e>coc</span>-<span style=color:#a6e22e>classobj</span>-<span style=color:#a6e22e>i</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>omap</span> <span style=color:#a6e22e>ic</span> &lt;<span style=color:#a6e22e>Plug</span>&gt;(<span style=color:#a6e22e>coc</span>-<span style=color:#a6e22e>classobj</span>-<span style=color:#a6e22e>i</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>xmap</span> <span style=color:#a6e22e>ac</span> &lt;<span style=color:#a6e22e>Plug</span>&gt;(<span style=color:#a6e22e>coc</span>-<span style=color:#a6e22e>classobj</span>-<span style=color:#a6e22e>a</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>omap</span> <span style=color:#a6e22e>ac</span> &lt;<span style=color:#a6e22e>Plug</span>&gt;(<span style=color:#a6e22e>coc</span>-<span style=color:#a6e22e>classobj</span>-<span style=color:#a6e22e>a</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34; 用 CTRL-S 選取整個函數或是類別</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; 需要 language server 支援 &#39;textDocument/selectionRange&#39;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>nmap</span> &lt;<span style=color:#a6e22e>silent</span>&gt; &lt;<span style=color:#a6e22e>C</span>-<span style=color:#a6e22e>s</span>&gt; &lt;<span style=color:#a6e22e>Plug</span>&gt;(<span style=color:#a6e22e>coc</span>-<span style=color:#a6e22e>range</span>-<span style=color:#a6e22e>select</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>xmap</span> &lt;<span style=color:#a6e22e>silent</span>&gt; &lt;<span style=color:#a6e22e>C</span>-<span style=color:#a6e22e>s</span>&gt; &lt;<span style=color:#a6e22e>Plug</span>&gt;(<span style=color:#a6e22e>coc</span>-<span style=color:#a6e22e>range</span>-<span style=color:#a6e22e>select</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34; 新增 `:Format` 命令，和 Chiel92/vim-autoformat 選一個就行了</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>command</span>! -<span style=color:#a6e22e>nargs</span>=<span style=color:#ae81ff>0</span> <span style=color:#a6e22e>Format</span> :<span style=color:#a6e22e>call</span> <span style=color:#a6e22e>CocAction</span>(<span style=color:#e6db74>&#39;format&#39;</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34; 新增 `:Fold` 命令，可以折疊目前的檔案（我怎麼測試就是折不起來，不確定到底在幹麻，vim 內建也有折疊阿？</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>command</span>! -<span style=color:#a6e22e>nargs</span>=? <span style=color:#a6e22e>Fold</span> :<span style=color:#a6e22e>call</span>     <span style=color:#a6e22e>CocAction</span>(<span style=color:#e6db74>&#39;fold&#39;</span>, &lt;<span style=color:#a6e22e>f</span>-<span style=color:#a6e22e>args</span>&gt;)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34; 新增 `:OR` 命令，可以整理目前檔案引入的函式庫（測試 Golang 會刪掉沒用到的但是 nodejs 要用 &#39;import&#39; 才會理人，用 &#39;require&#39; 他會當作沒看到什麼都不做</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>command</span>! -<span style=color:#a6e22e>nargs</span>=<span style=color:#ae81ff>0</span> <span style=color:#a6e22e>OR</span>   :<span style=color:#a6e22e>call</span>     <span style=color:#a6e22e>CocAction</span>(<span style=color:#e6db74>&#39;runCommand&#39;</span>, <span style=color:#e6db74>&#39;editor.action.organizeImport&#39;</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34; 添加 (neo)vim 原生的狀態列支援（他會在最下面提供一些訊息</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; 注意：用 `:h coc-status` 指令看如何和其他狀態列外掛結合</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; 提供範例：lightline.vim, vim-airline.（如果你要用這個的話請務必看範例，不然你的外掛等於白裝</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>set</span> <span style=color:#a6e22e>statusline</span>^=%{<span style=color:#a6e22e>coc</span>#<span style=color:#a6e22e>status</span>()}%{<span style=color:#a6e22e>get</span>(<span style=color:#a6e22e>b</span>:,<span style=color:#e6db74>&#39;coc_current_function&#39;</span>,<span style=color:#e6db74>&#39;&#39;</span>)}<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34; CocList 的鍵盤映射（CocList 的功能是顯示所有 XXX，我等等就只寫 XXX 的部份</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; 診斷</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>nnoremap</span> &lt;<span style=color:#a6e22e>silent</span>&gt;&lt;<span style=color:#a6e22e>nowait</span>&gt; &lt;<span style=color:#a6e22e>space</span>&gt;<span style=color:#a6e22e>a</span>  :&lt;<span style=color:#a6e22e>C</span>-<span style=color:#a6e22e>u</span>&gt;<span style=color:#a6e22e>CocList</span> <span style=color:#a6e22e>diagnostics</span>&lt;<span style=color:#a6e22e>cr</span>&gt;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; 擴充</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>nnoremap</span> &lt;<span style=color:#a6e22e>silent</span>&gt;&lt;<span style=color:#a6e22e>nowait</span>&gt; &lt;<span style=color:#a6e22e>space</span>&gt;<span style=color:#a6e22e>e</span>  :&lt;<span style=color:#a6e22e>C</span>-<span style=color:#a6e22e>u</span>&gt;<span style=color:#a6e22e>CocList</span> <span style=color:#a6e22e>extensions</span>&lt;<span style=color:#a6e22e>cr</span>&gt;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; 命令</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>nnoremap</span> &lt;<span style=color:#a6e22e>silent</span>&gt;&lt;<span style=color:#a6e22e>nowait</span>&gt; &lt;<span style=color:#a6e22e>space</span>&gt;<span style=color:#a6e22e>c</span>  :&lt;<span style=color:#a6e22e>C</span>-<span style=color:#a6e22e>u</span>&gt;<span style=color:#a6e22e>CocList</span> <span style=color:#a6e22e>commands</span>&lt;<span style=color:#a6e22e>cr</span>&gt;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; 大綱（和 tag bar 的功能差不多，就是你定義的變數物件函數等等</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>nnoremap</span> &lt;<span style=color:#a6e22e>silent</span>&gt;&lt;<span style=color:#a6e22e>nowait</span>&gt; &lt;<span style=color:#a6e22e>space</span>&gt;<span style=color:#a6e22e>o</span>  :&lt;<span style=color:#a6e22e>C</span>-<span style=color:#a6e22e>u</span>&gt;<span style=color:#a6e22e>CocList</span> <span style=color:#a6e22e>outline</span>&lt;<span style=color:#a6e22e>cr</span>&gt;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; 在 workspace 中找某個變數、函數、物件（「符號」）</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>nnoremap</span> &lt;<span style=color:#a6e22e>silent</span>&gt;&lt;<span style=color:#a6e22e>nowait</span>&gt; &lt;<span style=color:#a6e22e>space</span>&gt;<span style=color:#a6e22e>s</span>  :&lt;<span style=color:#a6e22e>C</span>-<span style=color:#a6e22e>u</span>&gt;<span style=color:#a6e22e>CocList</span> -<span style=color:#a6e22e>I</span> <span style=color:#a6e22e>symbols</span>&lt;<span style=color:#a6e22e>cr</span>&gt;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; 執行預設的 `:CocNext`</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>nnoremap</span> &lt;<span style=color:#a6e22e>silent</span>&gt;&lt;<span style=color:#a6e22e>nowait</span>&gt; &lt;<span style=color:#a6e22e>space</span>&gt;<span style=color:#a6e22e>j</span>  :&lt;<span style=color:#a6e22e>C</span>-<span style=color:#a6e22e>u</span>&gt;<span style=color:#a6e22e>CocNext</span>&lt;<span style=color:#a6e22e>CR</span>&gt;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; 執行預設的 `:CocPrev</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>nnoremap</span> &lt;<span style=color:#a6e22e>silent</span>&gt;&lt;<span style=color:#a6e22e>nowait</span>&gt; &lt;<span style=color:#a6e22e>space</span>&gt;<span style=color:#a6e22e>k</span>  :&lt;<span style=color:#a6e22e>C</span>-<span style=color:#a6e22e>u</span>&gt;<span style=color:#a6e22e>CocPrev</span>&lt;<span style=color:#a6e22e>CR</span>&gt;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; 打開上一次的 `:CocList`（這個指令可以列出很多東西</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>nnoremap</span> &lt;<span style=color:#a6e22e>silent</span>&gt;&lt;<span style=color:#a6e22e>nowait</span>&gt; &lt;<span style=color:#a6e22e>space</span>&gt;<span style=color:#a6e22e>p</span>  :&lt;<span style=color:#a6e22e>C</span>-<span style=color:#a6e22e>u</span>&gt;<span style=color:#a6e22e>CocListResume</span>&lt;<span style=color:#a6e22e>CR</span>&gt;<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h1 id=結尾>結尾<a hidden class=anchor aria-hidden=true href=#結尾>#</a></h1><p>呼～！總算翻譯完了，有幾個我真的看不出來在幹嘛的設定翻譯不太好請各位見諒。</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.simbafs.cc/tags/cli/>cli</a></li><li><a href=https://blog.simbafs.cc/tags/terminal/>terminal</a></li><li><a href=https://blog.simbafs.cc/tags/software-development/>software development</a></li><li><a href=https://blog.simbafs.cc/tags/vim/>vim</a></li><li><a href=https://blog.simbafs.cc/tags/tmux/>tmux</a></li><li><a href=https://blog.simbafs.cc/tags/zsh/>zsh</a></li></ul><nav class=paginav><a class=prev href=https://blog.simbafs.cc/posts/ithelp/day18/><span class=title>« 上一篇</span><br><span>Day 18：幫你的 HTML 開發裝上噴射引擎！vim-emmet</span></a>
<a class=next href=https://blog.simbafs.cc/posts/ithelp/day16/><span class=title>下一篇 »</span><br><span>Day 16：自動補全！coc.nvim</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://blog.simbafs.cc/>Simba's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="複製";function s(){t.innerText="已複製！",setTimeout(()=>{t.innerText="複製"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>