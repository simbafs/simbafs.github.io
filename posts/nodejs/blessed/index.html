<!doctype html><html lang=zh-tw dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Simba's Blog</title>
<meta name=keywords content>
<meta name=description content="blessed ">
<meta name=author content="simba-fs">
<link rel=canonical href=https://blog.simba-fs.dev/posts/nodejs/blessed/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style>
<link rel=preload href=/images/icon/icon.png as=image>
<link rel=icon href=https://blog.simba-fs.dev/images/icon/icon.png>
<link rel=icon type=image/png sizes=16x16 href=https://blog.simba-fs.dev/images/icon/icon-16.png>
<link rel=icon type=image/png sizes=32x32 href=https://blog.simba-fs.dev/images/icon/icon-32.png>
<link rel=apple-touch-icon href=https://blog.simba-fs.dev/images/icon/icon.png>
<link rel=mask-icon href=https://blog.simba-fs.dev/images/icon/icon.png>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.91.1">
<link rel=alternate type=application/rss+xml href=https://blog.simba-fs.dev/posts/nodejs/blessed/index.xml>
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-175823992-1','auto'),ga('send','pageview'))</script><meta property="og:title" content>
<meta property="og:description" content>
<meta property="og:type" content="website">
<meta property="og:url" content="https://blog.simba-fs.dev/posts/nodejs/blessed/"><meta property="og:image" content="https://blog.simba-fs.dev/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="og:site_name" content="Simba's Blog">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://blog.simba-fs.dev/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E">
<meta name=twitter:title content>
<meta name=twitter:description content>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"","item":"https://blog.simba-fs.dev/posts/"},{"@type":"ListItem","position":2,"name":"","item":"https://blog.simba-fs.dev/posts/nodejs/"},{"@type":"ListItem","position":3,"name":"","item":"https://blog.simba-fs.dev/posts/nodejs/blessed/"}]}</script>
</head>
<body class=list id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://blog.simba-fs.dev/ accesskey=h title="Home (Alt + H)">
<img src=/images/icon/icon.png alt=logo aria-label=logo height=35>Home</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://blog.simba-fs.dev/categories/ title=Categories>
<span>Categories</span>
</a>
</li>
<li>
<a href=https://blog.simba-fs.dev/tags/ title=Tags>
<span>Tags</span>
</a>
</li>
<li>
<a href=https://blog.simba-fs.dev/archive/ title=Archives>
<span>Archives</span>
</a>
</li>
<li>
<a href=https://blog.simba-fs.dev/search/ title="Search (Alt + /)" accesskey=/>
<span>Search</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<div class=post-content><h1 id=blessed>blessed<a hidden class=anchor aria-hidden=true href=#blessed>#</a></h1>
</div>
<article class=post-entry>
<header class=entry-header>
<h2>blessed-landmine
</h2>
</header>
<section class=entry-content>
<p>這是一篇我在用 blessed 時踩的一些雷 會持續的更新
1. 記得 render 今天在寫 API 時踩到兩次 更新了資料卻沒有 render 例如 textarea.setValue() 這個函式設定完之後他畫面不會更新 要自己 render
2. textarea.setValue() 只接受字串當參數 我個人覺得 blessed 缺少一個像是 jquery 的函式庫 沒有一個很好的 API 包裝 例如說這個函式 textarea.setValue() 就只吃字串 因為他用了 String.prototype.replace 這個函數 而且他沒有一個很好的防呆機制例如參數型別檢查 幸好是他的程式碼沒有做 uglify 還算簡單易懂 而且 node 的錯誤訊息的 stack 可以引導到真正出錯的地方</p>
</section>
<footer class=entry-footer><span title="2020-02-26 00:00:00 +0000 UTC">2020-February-26</span>&nbsp;·&nbsp;1 分鐘&nbsp;·&nbsp;simba-fs</footer>
<a class=entry-link aria-label="post link to blessed-landmine" href=https://blog.simba-fs.dev/posts/nodejs/blessed/blessed-landmine/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>blessed切換畫面
</h2>
</header>
<section class=entry-content>
<p>今天完成了新版本的 treetify 看這 同時我設計好了右邊的 edit 但是我的問題是他要根據情況不同切換不同的頁面 來看看我的一些想法：
從 screen.children[2] 把他會掉，可是會出錯不行 有一個元件 Carousel 好像可以但是他其實是用方向鍵控制所以也不行 終於我想了一個方法，接下來來介紹 這是測試程式碼 const blessed = require('blessed'); const contrib = require('blessed-contrib'); const screen = blessed.screen({ title: 'JSON viewer', debug: true }); const grid = new contrib.grid({ rows: 1, cols: 2, screen: screen }); const tree = grid.set(0, 0, 1, 1, blessed.box, { border: {type: 'line'}, content: 'Tree', label: 'Tree' }); const edit = grid.set(0, 1, 1, 1, blessed....</p>
</section>
<footer class=entry-footer><span title="2020-02-20 00:00:00 +0000 UTC">2020-February-20</span>&nbsp;·&nbsp;1 分鐘&nbsp;·&nbsp;simba-fs</footer>
<a class=entry-link aria-label="post link to blessed切換畫面" href=https://blog.simba-fs.dev/posts/nodejs/blessed/blessed%E5%88%87%E6%8F%9B%E7%95%AB%E9%9D%A2/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>blessed-contrib-tree
</h2>
</header>
<section class=entry-content>
<p>Tree 想說先想一個專案來練練手 熟悉一下 blessed 突然看到 blessed-contrib 裡有個元件叫 tree 想說可以做成 JSON viewer 於是就開工了！
其中最重要的部份就是搞定樹狀結構 因為他有特定的格式和選項 下面是官方的範例
範例 { extended: true, children: { 'Fruit': { children: { 'Banana': {}, 'Apple': {}, 'Cherry': {}, 'Exotics': { children: { 'Mango': {}, 'Papaya': {}, 'Kiwi': { name: 'Kiwi(notthebird!)', myCustomProperty: "hairyfruit" } } }, 'Pear': {} } }, 'Vegetables': { children: { 'Peas': {}, 'Lettuce': {}, 'Pepper': {} } } } } 每個節點都是物件 他的子節點存在 children 裡 如果是空物件代表這是葉節點 extended 屬性是是否展開，預設 true name 是顯示出來的字，如果要改再設，預設是 index myCustomProperty 直翻是自訂屬性，應該是當 tree....</p>
</section>
<footer class=entry-footer><span title="2020-02-18 00:00:00 +0000 UTC">2020-February-18</span>&nbsp;·&nbsp;1 分鐘&nbsp;·&nbsp;simba-fs</footer>
<a class=entry-link aria-label="post link to blessed-contrib-tree" href=https://blog.simba-fs.dev/posts/nodejs/blessed/blessed-contrib-tree/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>blessed
</h2>
</header>
<section class=entry-content>
<p>某天我有一個問題 gtop 的圖畫界面是怎麼做的，我知道他是用 node 寫的，對他別有興趣 我上 github 看他的 package.json 發現他的 depandence 只有三個
... "dependencies": { "blessed": "^0.1.81", "blessed-contrib": "^4.8.16", "systeminformation": "^4.14.4" }, ... 其中 systeminformation 很顯然是取得系統資訊 那 GUI 的 library 應該就是 blessed 和 blessed-contrib 了 去 blessed 的 github 看看 沒想到這是一個超強大的函式庫 可是網路上的教學卻很少 只好自己看 docs 啦
接下來是我測試的一些程式碼和截圖</p>
</section>
<footer class=entry-footer><span title="2020-02-17 00:00:00 +0000 UTC">2020-February-17</span>&nbsp;·&nbsp;1 分鐘&nbsp;·&nbsp;simba-fs</footer>
<a class=entry-link aria-label="post link to blessed" href=https://blog.simba-fs.dev/posts/nodejs/blessed/blessed/></a>
</article>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=https://blog.simba-fs.dev/>Simba's Blog</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>